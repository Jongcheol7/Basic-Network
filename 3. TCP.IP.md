# 3-1. 데이터를전송하는 역할을 하는 계층
+ 네트워크 인터페이스층 : 같은 네트워크 안에서 데이터를 전송하는 것. 네트워크 인터페이스층의 구체적인 프로토콜로는 이더넷이나 무선LAN이 있다. 예를들어 레이어2 스위치에 pc1과 pc2가 
 하나의 네트워크를 구성할때 각 호스트에서 데이터를 전송한다.
+ 인터넷층 : 네트워크와 네트워크를 서로 연결해서 데이터를 전송하는 것. 즉 다른 네트워크로의 데이터 전송. 네트워크 사이에 데이터를 전송하려면 라우터를 사용한다. 이러한 전송을 라우팅이라고 
 하며, 원격지 네트워크에서 최종적인 출발지와 목적지 사이의 데이터 전송을 엔드투엔드 통신이라 부른다.
 
# 3-2. 애플리케이션의 동작을 준비하는 계층
+ 트랜스포트층 : 데이터를 적절한 애플리케이션에 배분하는 역할.프로토콜로는 tcp / udp 가있다. TCP를 이용하면 어떤 이유로 데이터가 유실되더라도 그 사실을 검출해 데이터를 다시 보내준다. 
 TCP에는 엔드투엔드의 신뢰성을 확보해 주는 기능이 있다. 그밖에도 데이터의 분할과 조립 등이 있다.
+ 애플리케이션층 : 애플리케이션의 기능을 실행하기 위한 데이터의 형식과 처리 절차 등을 결정하는 것.

# 3-3. 데이터 송수신 규칙
+ 통신 주체인 애플리케이션이 데이터를 주고받으려면, 복수의 프로토콜을 조합할 필요가 있는데 TCP/IP에서는 4개의 프로토콜을 조합한다.
+ 각 프로토콜에는 각 기능을 실현하기 위한 제어정보(헤더)가 필요하다. 
+ 프로토콜이 데이터를 받으면, 각 프로토콜 헤더를 바탕으로 적절하게 처리하여 헤더를 벗겨내고 다시 다른 프로토콜로 처리를 넘긴다(역캡슐화)
+ 헤더를 추가하는 것은 캡슐화
+ FCS는 에러 체크를 위한 정보

# 3-4. 데이터를 부르는 방법은 다양하다
+ 애플리케이션의 데이터에는 다양한 프로토콜의 헤더가 추가되어 네트워크 상으로 내보내집니다.
+ 애플리케이션층은 메시지, 트랜스포트층은 세그먼트 또는 데이터그램, 인터넷층은 패킷 또는 데이터그램, 네트워크 인터페이스층은 프레임

# 3-5. 데이터를 목적지까지 전송한다.
+ IP란? 엔드투엔드 통신.
+ 네트워크 상의 어떤 PC에서 다른 PC등으로 데이터를 전송하는 것이 IP의 역할.출발지와 목적지가 같은 네트워크든 다른 네트워크든지 상관이 없다.
+ IP로 데이터를 전송하려면 IP헤더를 붙여 IP패킷으로 만든다. IP헤더에는 여러 정보가 포함되어 있지만 가장 중요한 것은 IP주소이다.
+ 목적지가 다른 네트워크에 있을 때는 경로 상에 있는 라우터가 IP패킷을 라우팅한다.
+ IP 주소란 호스트를 식별하기 위한 식별 정보이다. 
+ IP 주소는 호스트 자체가 아니라 호스트의 인터페이스를 식별한다.
+ IP 주소는 32비트이고 0과 1이 32개 나열된다. 이를 8비트씩 10진수로 변환하고 .으로 구분해서 표기.

# 3-6. 목적지는 하나? 아니면 여러개?
+ IP로 데이터를 전송할 때는 목적지가 하나든 여러개든 상관이 없다. 
+ 유니캐스트 : 단 한 곳으로 데이터를 전송하는 것을 유니캐스트라고 한다. 그러나 완전히 같은 데이터를 복수의 주소로 전송하고자 할때는 브로드캐스트와 멀티캐스트를 사용한다. 유니캐스트의 
 IP주소는 전반의 네트워크부와 후반의 호스트부로 구성된다.
+ 브로드캐스트 : 같은 네트워크 상에 모든 호스트에게 완전히 똑같은 데이터를 전송하는 것.
+ 멀티캐스트 : 같은 애플리케이션이 동작하는 등 특정 그룹에 포함되는 호스트에 완전히 똑같은 데이터를 전송하는 것.

# 3-7. 서브넷 마스크
+ IP주소를 구성하는 네트워크부와 호스트부는 가변적이다. 그래서 어디까지 네트워크부인지 명시하는 것이 서브넷 마스크이다.
+ 서브넷마스크는 32비트를 0과 1로 32개가 나열된다.
+ 1은 네트워크부를 나타내며 0은 호스트부를 나타낸다.
+ 반드시 연속한 1과 연속한 0이여야 한다.
+ 1111 1111 1111 1111 1111 1111 0000 0000 -> 255.255.255.0 -> /24
+ IP 주소 후반 호스트부를 모두 0으로 채우면 네트워크 주소가 되고, 1로 채우면 브로드캐스트 주소가 된다.

# 3-8. IP주소의 이용범위
+ 공인IP주소 : 인터넷을 이용하는 IP주소, 인터넷에서 통신하기 위해서는 반드시 공인된 주소가 필요. 공인 주소는 인터넷 전체에서 중복되지 않도록 관리됨. 인터넷 접속 서비스를 계약하면 
 공인 주소가 할당되게 된다. 공인 주소는 다른말로 퍼블릭IP주소로 불린다.
+ 사설IP주소 : 사내 네트워크 등의 사설 네트워크에서 이용되는 주소. 다른 네트워크의 사설 주소가 겹쳐도 상관 없다.
+ 사설 네트워크에서 그대로 인터넷으로 통신할 수 없다. 통신하기 위해서는 NAT이 필요하다.
+ 그 이유는 사설에서 공인으로 보낼 수는 있지만 응답으로 공인에서 사설로 보낼때는 사설 주소로된 IP패킷은 폐기되기 때문이다. 내가 생각하는 이유는 사설주소는 중복이 되기때문이지 않을까 싶다.
+ NAT은 사설주소를 라우터에서 변환해주는데 변환한 주소의 대응을 NAT테이블에 보존하고 나중에 응답할시 원래의 사설주소로 재변환해준다.

# 3-9. IP패킷이 잘 도착했을까?
+ IP로 데이터를 전송할때는 그 데이터가 잘 도착했는지 알 수가 없다.
+ 그러나 이를 확인하는 기능을 갖춘 프로토콜로써 ICMP가 있다.
+ ICMP의 주요 기능은 에러 리포트와 진단 기능이 있다.
+ 어떤 이유로 IP패킷이 폐기되면, ICMP 도달불능 메시지로 출발지에 통보한다.
+ 진단기능에서는 IP의 엔드투엔드 통신이 가능한지 확인하는 기능이다. 진단을 위해 보통 PING커맨드로 지정한 IP주소와 통신할 수 있는지 확인한다.

# 3-10. ARP란?
+ IP주소와 인터페이스를 식별하기 위한 MAC주소를 대응시키는 것이 ARP의 역할. 이를 주소해석이라고 부른다.
+ IP헤더의 IP주소와 이더넷프레임의 이더넷 헤더안의 MAC주소와 ARP로 대응시키다.

# 3-11. 포트번호
+ 호스트에서 동작하는 애플리케이션에 데이터를 배분하기 위해서는 각각의 애플리케이션을 식별할 수 있어야한다. 이때 포트번호를 이용한다.
+ 이는 TCP 또는 UDP 헤더에 지정한다.
+ 웰노운포트 : 서버 애플리케이션용으로 예약된 포트번호 0~1023
+ 등록된포트 : 웰노운포트 이외에 자주 이용되는 서버 애플리케이션을 식별하기 위한 포트번호 1024~49151
+ 동적/사설포트 : 클라이언트 애플리케이션을 식별하기 위한 포트번호

# 3-12. TCP 에 의한 데이터 전송 절차
+ 1. TCP 커넥션 맺기 : 상대방이 정상적으로 동작하고, 데이터를 송수신할수 있는 상태인지 확인 (3웨이 핸드쉐이크)
+ 2. 애플리케이션 간 데이터 송수신 : TCP헤더를 추가해 TCP세그먼트를 만들고 데이터의 크기가 크면 복수의 TCP세그먼트로 전송한다. 그리고 목적지에서는 차례대로 원본 데이터로 조립힌다.
 또한 데이터 수신 확인을 ACK라고 부르고, 데이터가 제대로 도착하지 않았다면 데이터를 재전송한다. 만약 네트워크가 혼잡해지면 데이터 전송속도를 제한하는데 이것을 프롤우 제어라고 한다.
+ 3. TCP 커넥션 끊기

# 3-13. TCP 헤더 형식
+ TCP세그먼트의 TCP헤더에서 가장 중요한 것은 포트번호입니다. 이유는 포트번호로 적절한 애플리케이션 프로토콜에 데이터를 배분할 수 있기 때문이다. 
+ 그리고 신뢰성 있는 데이터 전송을 위해 시퀀스 번호와 ACK 번호가 있다.
+ 시퀀스 번호는 TCP로 전송하는 데이터 순서를 나타낸다.
+ ACK 번호는 데이터를 바르게 수신했음을 확인하기 위해 이용.

# 3-14. TCP 데이터 분할 구조
+ TCP에서 애플리케이션의 데이터를 분할하는 단위는 MSS(Maximun Segment Size)라고 부른다. MSS를 넘는 크기의 데이터는 MSS로 나누어 송신. MSS의 표준 크기는 1460바이트.
+ HTTP헤더를 붙인 HTTP메시지를 MSS만큼 분할을 하여서 각각의 메시지에 TCP헤더를 붙여 다수의 TCP 세그먼트를 만든다.

# 3-15. UDP
+ UDP는 PC나 서버 등에 데이터를 적절한 애플리케이션에 배분하는 기능만 있는 프로토콜.
+ 상대방의 애플리케이션이 동작하는지 확인하지 않은채 무조건 UDP데이터그램으로 애플리케이션의 데이터를 송신.
+ 따라서 데이터 전송 효율이 좋다는 장점. 반면에 신뢰성이 낮음(데이터가 잘 도착했는지 모름)
+ 확인할 필요가 있다면 애플리케이션에서 그런 기능을 만들어야함.
+ UDP에는 크기가 큰 데이터를 분할하는 기능도 없음. 따라서 데이터 크기가 클 때는 애플리케이션 쪽에서 적절한 크기로 쪼개야한다.

# 3-16. DNS
+ IP주소로는 이해하기 어려우므로 호스트명을 이용해서 통신 상대를 지정하는 경우가 많다.
+ 호스트명에서 IP주소를 구하는 것을 이름해석이라고 부르며, DNS를 이용한다.
+ DNS를 이용하려면 DNS서버가 필요하다.
+ DNS 서버에 호스트명과 IP주소 등의 리소스 레코드를 등록한다.
+ DNS 서버에 질의하는 기능을 DNS 리졸버라고 부른다.
+ DNS 서버로 IP 주소를 질의할 때는 루트에서부터 질의를 반복한다.

# 3-17. DHCP
+ TCP/IP를 이용하기 위해서는 각 기기에 TCP/IP 설정이 바르게 되어 있어야한다. 이를 자동으로 해주는 프로토콜이 DHCP이다.
